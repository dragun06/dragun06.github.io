<!DOCTYPE html>
<html>
<head>
  <title>Exo1</title>
</head>
<body>
  <h1>Watch Position</h1>
  <div id="position"></div>
  <div id="accuracy"></div>
  <div id="speed"></div>
  <div id="timestamp"></div>

  <h1>Current Position</h1>
  <div id="location"></div>
  <script>
    function successPos(position) {
      const { coords } = position;
      const { latitude, longitude, altitude, accuracy, speed } = coords;
      const { timestamp } = position;
      const date = new Date(timestamp);

      document.getElementById('position').innerHTML = `Position: ${latitude}, ${longitude}, ${altitude}`;
      document.getElementById('accuracy').innerHTML = `Accuracy: ${accuracy}`;
      document.getElementById('speed').innerHTML = `Speed: ${speed}`;
      document.getElementById('timestamp').innerHTML = `Timestamp: ${date}`;
    }

    function errorPos(error) {
      console.error(error);
    }
    
    navigator.geolocation.watchPosition(successPos, errorPos);

    function success(position) {
        var latitude  = position.coords.latitude;
        var longitude = position.coords.longitude;
        var altitude  = position.coords.altitude;
        var accuracy  = position.coords.accuracy;
        var speed     = position.coords.speed;
        var timestamp = position.timestamp;

        var date = new Date(timestamp);

        document.getElementById('location').innerHTML =
          'Latitude: ' + latitude + '<br>' +
          'Longitude: ' + longitude + '<br>' +
          'Altitude: ' + altitude + '<br>' +
          'Accuracy: ' + accuracy + '<br>' +
          'Speed: ' + speed + '<br>' +
          'Timestamp: ' + date;
      }

      function error(err) {
        console.warn('ERROR(' + err.code + '): ' + err.message);
      }

      navigator.geolocation.getCurrentPosition(success, error, {enableHighAccuracy: true});
  </script>
</body>
</html>